<!-- Dynamic Rendering Component -->
<div [ngClass]="element?.class">
    <ng-container [ngSwitch]="element?.element">

        <!-- Handle div elements -->
        <div *ngSwitchCase="'div'">
            <!-- If this div is a 'row', handle the columns inside it -->
            <!-- <ng-container *ngIf="element?.class?.includes('row')">

                <div class="row">
                    <ng-container *ngFor="let child of element?.children">
                        <ng-container *ngIf="child?.class?.includes('col-md')">
                            <div [ngClass]="child?.class">
                                <app-dynamic-renderer [element]="child"></app-dynamic-renderer>
                            </div>
                        </ng-container>
                        <ng-container *ngIf="!child?.class?.includes('col-md')">
                            <app-dynamic-renderer [element]="child"></app-dynamic-renderer>
                        </ng-container>
                    </ng-container>
                </div>
            </ng-container>

            <ng-container *ngIf="!element?.class?.includes('row')">
                <ng-container *ngFor="let child of element?.children">
                    <app-dynamic-renderer [element]="child"></app-dynamic-renderer>
                </ng-container>
            </ng-container> -->

            <div *ngIf="element?.class?.includes('row')" class="row">
                <ng-container *ngFor="let child of element?.children">
                  <!-- Apply layout classes (col-md-4, etc.) only to the first-level container div -->
                  <div *ngIf="isLayoutClass(child?.class)" [ngClass]="child?.class">
                    <app-dynamic-renderer [element]="child"></app-dynamic-renderer>
                  </div>
              
                  <!-- For child components (like card), we don't apply layout classes -->
                  <ng-container *ngIf="!isLayoutClass(child?.class)">
                    <app-dynamic-renderer [element]="child"></app-dynamic-renderer>
                  </ng-container>
                </ng-container>
              </div>
              
              <!-- If it's not a row, simply render the children -->
              <ng-container *ngIf="!element?.class?.includes('row')">
                <ng-container *ngFor="let child of element?.children">
                  <app-dynamic-renderer [element]="child"></app-dynamic-renderer>
                </ng-container>
              </ng-container>
              
        </div>

        

        <!-- Render charts -->
        <div *ngSwitchCase="'chart'" [ngClass]="element?.class">
            <canvas *ngIf="element?.type === 'bar'" baseChart [datasets]="element?.data?.datasets"
                [labels]="element?.data?.labels" [options]="element?.options" [chartType]="'bar'">
            </canvas>

            <canvas *ngIf="element?.type === 'line'" baseChart [datasets]="element?.data?.datasets"
                [labels]="element?.data?.labels" [options]="element?.options" [chartType]="'line'">
            </canvas>

            <canvas *ngIf="element?.type === 'pie'" baseChart [datasets]="element?.data?.datasets"
                [labels]="element?.data?.labels" [options]="element?.options" [chartType]="'pie'">
            </canvas>
        </div>


        <!-- Render headers (h1, h2, h3, h4, h5, h6) -->
        <h1 *ngSwitchCase="'h1'" [ngClass]="element?.class">{{ resolveText(element?.text) }}</h1>
        <h2 *ngSwitchCase="'h2'" [ngClass]="element?.class">{{ resolveText(element?.text) }}</h2>
        <h3 *ngSwitchCase="'h3'" [ngClass]="element?.class">{{ resolveText(element?.text) }}</h3>
        <h4 *ngSwitchCase="'h4'" [ngClass]="element?.class">{{ resolveText(element?.text) }}</h4>
        <h5 *ngSwitchCase="'h5'" [ngClass]="element?.class">{{ resolveText(element?.text) }}</h5>
        <h6 *ngSwitchCase="'h6'" [ngClass]="element?.class">{{ resolveText(element?.text) }}</h6>

        <!-- Render paragraph (p) -->
        <p *ngSwitchCase="'p'" [ngClass]="element?.class">{{ resolveText(element?.text) }}</p>

        <!-- Render image (img) -->
        <img *ngSwitchCase="'img'" [src]="element?.src" [alt]="element?.alt" [ngClass]="element?.class" />

        <!-- Render input elements -->
        <input *ngSwitchCase="'input'" [type]="element?.type" [placeholder]="element?.placeholder"
            [(ngModel)]="formData[element?.name]" [ngClass]="element?.class" />

        <!-- Render textarea elements -->
        <textarea *ngSwitchCase="'textarea'" [placeholder]="element?.placeholder" [(ngModel)]="formData[element?.name]"
            [ngClass]="element?.class"></textarea>

        <!-- Render select elements -->
        <select *ngSwitchCase="'select'" [(ngModel)]="formData[element?.name]" [ngClass]="element?.class">
            <option *ngFor="let option of element?.options" [value]="option.value">{{ option.label }}</option>
        </select>

        <!-- Render checkbox -->
        <div *ngSwitchCase="'checkbox'" class="form-check">
            <input type="checkbox" [(ngModel)]="formData[element?.name]" [ngClass]="element?.class">
            <label class="form-check-label">{{ resolveText(element?.label) }}</label>
        </div>

        <!-- Render button -->
        <button *ngSwitchCase="'button'" [ngClass]="element?.class" (click)="handleAction(element?.action)">
            {{ resolveText(element?.text) }}
        </button>

        <!-- Render link (anchor tag) -->
        <a *ngSwitchCase="'a'" [href]="element?.href" [ngClass]="element?.class">
            {{ resolveText(element?.text) }}
        </a>

        <!-- Render form -->
        <form *ngSwitchCase="'form'" [ngClass]="element?.class" (ngSubmit)="handleAction(element?.action)">
            <ng-container *ngFor="let child of element?.children">
                <app-dynamic-renderer [element]="child"></app-dynamic-renderer>
            </ng-container>
        </form>

        <!-- Render label -->
        <label *ngSwitchCase="'label'" [ngClass]="element?.class">
            {{ resolveText(element?.text) }}
        </label>

        <!-- Render blockquote -->
        <blockquote *ngSwitchCase="'blockquote'" [ngClass]="element?.class">
            {{ resolveText(element?.text) }}
        </blockquote>

        <!-- Render list items (ul, ol, li) -->
        <ul *ngSwitchCase="'ul'" [ngClass]="element?.class">
            <li *ngFor="let item of element?.items">{{ resolveText(item) }}</li>
        </ul>
        <ol *ngSwitchCase="'ol'" [ngClass]="element?.class">
            <li *ngFor="let item of element?.items">{{ resolveText(item) }}</li>
        </ol>

        <!-- Render table -->
        <table *ngSwitchCase="'table'" [ngClass]="element?.class">
            <thead>
                <tr>
                    <th *ngFor="let header of element?.headers">{{ resolveText(header) }}</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let row of element?.rows">
                    <td *ngFor="let cell of row">{{ resolveText(cell) }}</td>
                </tr>
            </tbody>
        </table>

        <!-- Render span (inline element) -->
        <span *ngSwitchCase="'span'" [ngClass]="element?.class">
            {{ resolveText(element?.text) }}
        </span>

        <!-- Default Case for unsupported element types -->
        <ng-container *ngSwitchDefault>
            <span>Unsupported Element</span>
        </ng-container>
    </ng-container>
</div>